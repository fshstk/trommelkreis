{% extends "layout.jinja" %}

{% block title %}Upload{% endblock %}
{% block heading %}Mitmachen{% endblock %}
{% block subheading %}beim digitalen Trommelkreis{% endblock %}

{% block main %}
<h2>{{ today.name }}:</h2>
<p>{{ today.challenge }}</p>
<hr>

<div class="d-flex justify-content-center">
	<form enctype="multipart/form-data" action="#" method="POST" id="upload-form" class="d-flex flex-column" novalidate>
		<h2 class="pb-2">Teile deinen Track:</h2>

		<div>
			<input type="text" class="form-control" name="password" placeholder="Passwort">
			{# <p class="invalid-feedback mb-0">Falsches Passwort</p> #}
		</div>

		<div class="custom-file mt-2 mb-2">
			<input type="file" class="custom-file-input" name="file">
			<label class="custom-file-label" for="customFile">Dein Track… (nur MP3 erlaubt)</label>
		</div>

		<div>
			<input type="text" class="form-control" name="name" placeholder="Dein Name">
			<small class="form-text text-muted pb-3">Lass das Feld leer, um anonym zu bleiben.</small>
		</div>

		<div class="form-check mb-3">
			<input type="checkbox" class="form-check-input" name="tos" required>
			<label class="form-check-label" for="tos">
				Mein Track ist <a href="https://creativecommons.org/licenses/by/4.0/deed.de">CC-BY</a> lizensiert.
			</label>
			<small class="form-text text-muted">
				Nach dem Hochladen sind die Tracks für jeden abspielbar und herunterladbar, und werden ggf. als Material
				für zukünftige Trommelkreise verwendet.<br>
				Durch die CC-BY Lizenz teilst du uns mit, dass das für dich okay ist.
			</small>
		</div>

		<button type="submit" style="width: 100%;" class="btn btn-primary">Upload</button>
	</form>
</div>

<script>
	(function () {
		'use strict';
		window.addEventListener('load', function () {
			var form = document.getElementById('upload-form');
			form.addEventListener('submit', function (event) {
				if (form.checkValidity() === false) {
					event.preventDefault();
					event.stopPropagation();
				}
				form.classList.add('was-validated');
			}, false);
		}, false);
	})();
</script>
{% endblock %}